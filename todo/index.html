
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="todo.png" type="image/x-icon" />
    <link rel="stylesheet" href="style.css" />
    <title>todo</title>
  </head>
  <body>
    <input id="input" type="text" placeholder="Enter your task" />
    <button id="add">Add</button>
    <ul id="list"></ul>
    <button id="theme">ðŸ”†</button>
    <button id="completed_tasks">completed tasks</button>
    <button id="readme_link">readme</button>

    <script>
      // 0
      let input = document.getElementById("input");
      let add = document.getElementById("add");
      let list = document.getElementById("list");
      //1
      let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
      function render_tasks() {
        list.innerHTML = "";
        tasks.forEach((task, index) => {
          const li = document.createElement("li");
          li.className = "li";
          li.textContent = task;

          // 2  button of delete
          const delete_btn = document.createElement("input");
          delete_btn.type = "checkbox";
          delete_btn.className = "check";
          delete_btn.onclick = () => {
            tasks.splice(index, 1);
            saveTasks();
            // 3 Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð² Ð¿Ð¾Ñ‚Ð¾Ðº
          };
          li.appendChild(delete_btn);
          list.appendChild(li);
        });
      }
      // 4 ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ, Ð² localStorage Ð¿ÑƒÑ‚ÐµÐ¼ Ð¿ÐµÑ€ÐµÑÐ¾Ð·Ð´Ð°Ñ
      function saveTasks() {
        localStorage.setItem("tasks", JSON.stringify(tasks));
        render_tasks();
      } //5 Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¸Ð· input Ð² tasks
      function push_to_tasks() {
        if (input.value.trim() !== "") {
          tasks.push(input.value);
          input.value = "";
          saveTasks();
        }
      }
      //5.1 Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¸Ð· Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¸Ð· input
      add.addEventListener("click", () => {
        push_to_tasks();
      });
      // 5.2
      input.addEventListener("keydown", (event) => {
        if (event.key === "Enter") {
          event.preventDefault();
          push_to_tasks();
        }
      });
      // 6 ÐŸÑ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ Ð²ÑÑ‚Ð°Ñ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ
      render_tasks();
      // 7 ÐºÐ½Ð¾Ð¿ÐºÐ° ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð²Ð¸Ð´ÐµÑ‚ Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð¼ README
      let readme = document.getElementById("readme_link");
      readme.addEventListener("click", () => {
        window.location.href = "read.html";
      });
      let completed_tasks = document.getElementById("completed_tasks");
      completed_tasks.addEventListener("click", () => {
        window.location.href = "completed_tasks.html";
      });
      let last_theme_local = localStorage.getItem("last_theme");
      let last_theme = "ðŸŒ™";

      let theme = document.getElementById("theme");
      if (last_theme_local === "ðŸ”†") {
        document.body.style.backgroundColor = "aliceblue";
        document.body.style.color = "black";
        theme.textContent = "ðŸŒ™";
      } else if (last_theme_local === "ðŸŒ™") {
        document.body.style.color = "aliceblue";
        document.body.style.backgroundColor = "rgb(33, 30, 30)";
        input.style.backgroundColor = "";
        input.style.color = "";
        add.style.backgroundColor = "";
        add.style.color = "";
      }
      theme.addEventListener("click", () => {
        if (theme.textContent === "ðŸ”†") {
          theme.textContent = "ðŸŒ™";
          document.body.style.backgroundColor = "aliceblue";
          document.body.style.color = "black";
          //input.style.backgroundColor = "rgb(33, 30, 30)";
          //input.style.color = "aliceblue";
          //add.style.backgroundColor = "rgb(33, 30, 30)";
          //add.style.color = "aliceblue";
          let last_theme = "ðŸ”†";
          localStorage.setItem("last_theme", last_theme);
        } else if (theme.textContent === "ðŸŒ™") {
          theme.textContent = "ðŸ”†";
          document.body.style.color = "aliceblue";
          document.body.style.backgroundColor = "rgb(33, 30, 30)";
          input.style.backgroundColor = "";
          input.style.color = "";
          add.style.backgroundColor = "";
          add.style.color = "";
          let last_theme = "ðŸŒ™";
          localStorage.setItem("last_theme", last_theme);
        }
      });
    </script>
  </body>
</html>
