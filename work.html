
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>work</title>
    <link rel="icon" href="./todo_logo.png" type="image/png" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <input id="input_w" type="text" placeholder="Enter your task" />
    <button id="add_w">Add</button>
    <ul id="list_w"></ul>
    <button id="back_to_index_in_work">back to ToDo</button>
    <script>
      let to_index = document.getElementById("back_to_index_in_work");
      to_index.addEventListener("click", () => {
        window.location.href = "index.html";
      });
      to_index.addEventListener("mousedown", () => {
        to_index.style.bottom = "17px";
      });
      document.addEventListener("mouseup", () => {
        to_index.style.bottom = "20px";
      });

      let input_w = document.getElementById("input_w");
      let add_w = document.getElementById("add_w");
      let list_w = document.getElementById("list_w");
      let tasks_w = JSON.parse(localStorage.getItem("tasks_w")) || [];
      function render_tasks_w() {
        list_w.innerHTML = "";
        tasks_w.forEach((task_w, index_w) => {
          const li_w = document.createElement("li");
          li_w.className = "li_w";
          li_w.textContent = task_w;
          //delete btn

          const delete_btn_w = document.createElement("input");
          delete_btn_w.type = "checkbox";
          delete_btn_w.className = "check_w";
          delete_btn_w.onclick = () => {
            li_w.style.textDecoration = delete_btn_w.checked
              ? "line-through"
              : "none";
            setTimeout(() => {
              let completed_tasks_array =
                JSON.parse(localStorage.getItem("completed_tasks")) || [];
              completed_tasks_array.push(task_w);
              localStorage.setItem(
                "completed_tasks",
                JSON.stringify(completed_tasks_array)
              );
              tasks_w.splice(index_w, 1);
              saveTasks();
            }, 800);
          };
          //color: rgb(138, 213, 0);color: rgb(92, 136, 8); mb
          const arrow_up = document.createElement("button");
          arrow_up.textContent = " ‚áß";
          const arrow_down = document.createElement("button");
          arrow_down.textContent = "‚á©";
          arrow_up.className = "btns_up_down";
          arrow_down.addEventListener("click", () => {
            if (index_w > 0) {
              [tasks_w[index_w - 1], tasks_w[index_w]] = [
                tasks_w[index_w],
                tasks_w[index_w - 1],
              ];
              saveTasks();
            }
          });
          arrow_down.className = "btns_up_down";
          arrow_up.addEventListener("click", () => {
            if (index_w < tasks_w.length - 1) {
              [tasks_w[index_w], tasks_w[index_w + 1]] = [
                tasks_w[index_w + 1],
                tasks_w[index_w],
              ];
              saveTasks();
            }
            // —è –Ω–µ –∑–Ω–∞—é –ø–æ—á–µ–º—É –æ–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–∞–∫,–∏–±–æ –µ—Å–ª–∏ –¥–µ–ª–∞—Ç—å –ø–æ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É - –æ–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
          });
          li_w.appendChild(arrow_up);
          li_w.appendChild(arrow_down);
          li_w.appendChild(delete_btn_w);
          list_w.prepend(li_w);
        });
      }
      //  —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å, –≤ localStorage –ø—É—Ç–µ–º –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è
      function saveTasks() {
        localStorage.setItem("tasks_w", JSON.stringify(tasks_w));
        render_tasks_w();
      }
      function push_to_tasks() {
        if (input_w.value.trim() !== "") {
          tasks_w.push(input_w.value);
          input_w.value = "";
          saveTasks();
        }
      }

      // –¥–æ–±–∞–≤–∏—Ç—å –∏–∑ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ input
      add_w.addEventListener("click", () => {
        push_to_tasks();
      });
      //
      input_w.addEventListener("keydown", (event) => {
        if (event.key === "Enter") {
          event.preventDefault();
          push_to_tasks();
        }
      });
      //  –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—Å—Ç–∞—Ç–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è
      render_tasks_w();

      //
      let last_theme_local = localStorage.getItem("last_theme");
      if (last_theme_local === "üîÜ") {
        document.body.style.backgroundColor = "aliceblue";
        document.body.style.color = "black";
      } else if (last_theme_local === "üåô") {
        document.body.style.color = "aliceblue";
        document.body.style.backgroundColor = "rgb(33, 30, 30)";
      }
    </script>
  </body>
</html>
