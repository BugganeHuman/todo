
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./todo_logo.png" type="image/png" />
    <link rel="stylesheet" href="style.css" />
    <title>todo</title>
  </head>
  <body>
    <input id="input" type="text" placeholder="Enter your task" />
    <button id="add">Add</button>
    <ul id="list"></ul>
    <button id="theme">ðŸ”†</button>
    <button id="completed_tasks_btn">completed tasks</button>
    <button id="readme_link">readme</button>
    <button id="btn_work">work</button>

    <script>
      // to everyone who reads this, the comments I leave below were made for me,
      // if I had forgotten how the code works, so I don't advise you to read them
      // Ð²ÑÐµÐ¼ ÐºÑ‚Ð¾ ÑÑ‚Ð¾ Ñ‡Ð¸Ñ‚Ð°ÐµÑ‚, ÐºÐ¾Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ðµ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ñ Ð¾ÑÑ‚Ð°Ð²Ð»ÑÑŽ Ð½Ð¸Ð¶Ðµ Ð±Ñ‹Ð»Ð¸ ÑÐ´ÐµÐ»Ð°Ð½Ñ‹
      // Ð´Ð»Ñ Ð¼ÐµÐ½Ñ, ÐµÑÐ»Ð¸ Ð±Ñ‹ Ñ Ð·Ð°Ð±Ñ‹Ð» ÐºÐ°Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ ÐºÐ¾Ð´, Ñ‚Ð°Ðº Ñ‡Ñ‚Ð¾ Ñ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ Ð¸Ñ… Ñ Ð²Ð°Ð¼ Ð½Ðµ ÑÐ¾Ð²ÐµÑ‚ÑƒÑŽ
      // 0
      let input = document.getElementById("input");
      let add = document.getElementById("add");
      let list = document.getElementById("list");
      //1
      let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
      function render_tasks() {
        list.innerHTML = "";
        tasks.forEach((task, index) => {
          const li = document.createElement("li");
          li.className = "li";
          li.textContent = task;

          // 2  button of delete
          const delete_btn = document.createElement("input");
          delete_btn.type = "checkbox";
          delete_btn.className = "check";
          delete_btn.onclick = () => {
            li.style.textDecoration = delete_btn.checked // Ñ‚Ðµ li Ñƒ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… Ð°ÐºÑ‚Ð¸Ð²ÐµÐ½ checkbox Ð·Ð°Ñ‡ÐµÑ€ÐºÐ½ÑƒÑ‚ÑŒ
              ? // Ð¸Ð»Ð¸ ÐµÑÐ»Ð¸ Ð¿Ð¾ Ð´Ñ€ÑƒÐ³Ð¾Ð¼Ñƒ, ÐµÑÐ»Ð¸ checkbox Ñƒ li true Ñ‚Ð¾ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ Ð¿ÐµÑ€Ð²Ð¾Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ, ÐµÑÐ»Ð¸ false Ñ‚Ð¾ Ð²Ñ‚Ð¾Ñ€Ð¾Ðµ
                "line-through"
              : "none";
            setTimeout(() => {
              let completed_tasks_array =
                JSON.parse(localStorage.getItem("completed_tasks")) || [];
              completed_tasks_array.push(task);
              localStorage.setItem(
                "completed_tasks",
                JSON.stringify(completed_tasks_array)
              );
              tasks.splice(index, 1);
              saveTasks();
            }, 800);

            // 3 Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð² Ð¿Ð¾Ñ‚Ð¾Ðº
          };
          //color: rgb(138, 213, 0);color: rgb(92, 136, 8); mb
          const arrow_up = document.createElement("button");
          arrow_up.textContent = " â‡§";
          arrow_up.className = "btns_up_down";
          arrow_up.addEventListener("click", () => {
            if (index > 0) {
              [tasks[index - 1], tasks[index]] = [
                tasks[index],
                tasks[index - 1],
              ];
              saveTasks();
            }
          });
          const arrow_down = document.createElement("button");
          arrow_down.textContent = "â‡©";
          arrow_down.className = "btns_up_down";
          arrow_down.addEventListener("click", () => {
            if (index < tasks.length - 1) {
              [tasks[index], tasks[index + 1]] = [
                tasks[index + 1],
                tasks[index],
              ];
              saveTasks();
            }
          });
          li.appendChild(arrow_up);
          li.appendChild(arrow_down);

          li.appendChild(delete_btn);
          list.appendChild(li);
        });
      }
      // 4 ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ, Ð² localStorage Ð¿ÑƒÑ‚ÐµÐ¼ Ð¿ÐµÑ€ÐµÑÐ¾Ð·Ð´Ð°Ñ
      function saveTasks() {
        localStorage.setItem("tasks", JSON.stringify(tasks));
        render_tasks();
      } //5 Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¸Ð· input Ð² tasks
      function push_to_tasks() {
        if (input.value.trim() !== "") {
          tasks.push(input.value);
          input.value = "";
          saveTasks();
        }
      }
      //5.1 Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¸Ð· Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¸Ð· input
      add.addEventListener("click", () => {
        push_to_tasks();
      });
      // 5.2
      input.addEventListener("keydown", (event) => {
        if (event.key === "Enter") {
          event.preventDefault();
          push_to_tasks();
        }
      });
      // 6 ÐŸÑ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ Ð²ÑÑ‚Ð°Ñ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ
      render_tasks();
      // 7 ÐºÐ½Ð¾Ð¿ÐºÐ° ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð²Ð¸Ð´ÐµÑ‚ Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð¼ README
      let readme = document.getElementById("readme_link");
      readme.addEventListener("mousedown", () => {
        readme.style.bottom = "17px";
      });
      // Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸Ñ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ñ ÐºÐ½Ð¾Ð¿ÐºÐ¸
      document.addEventListener("mouseup", () => {
        readme.style.bottom = "20px";
      });

      readme.addEventListener("click", () => {
        window.location.href = "read.html";
      });
      let completed_tasks = document.getElementById("completed_tasks_btn");
      completed_tasks.addEventListener("mousedown", () => {
        completed_tasks.style.bottom = "17px";
      });
      document.addEventListener("mouseup", () => {
        completed_tasks.style.bottom = "20px";
      });
      completed_tasks.addEventListener("click", () => {
        window.location.href = "completed_tasks.html";
      });
      let last_theme_local = localStorage.getItem("last_theme");
      let last_theme = "ðŸŒ™";

      let theme = document.getElementById("theme");
      if (last_theme_local === "ðŸ”†") {
        document.body.style.backgroundColor = "aliceblue";
        document.body.style.color = "black";
        theme.textContent = "ðŸŒ™";
      } else if (last_theme_local === "ðŸŒ™") {
        document.body.style.color = "aliceblue";
        document.body.style.backgroundColor = "rgb(33, 30, 30)";
        input.style.backgroundColor = "";
        input.style.color = "";
        add.style.backgroundColor = "";
        add.style.color = "";
      }
      theme.addEventListener("click", () => {
        if (theme.textContent === "ðŸ”†") {
          theme.textContent = "ðŸŒ™";
          document.body.style.backgroundColor = "aliceblue";
          document.body.style.color = "black";
          //input.style.backgroundColor = "rgb(33, 30, 30)";
          //input.style.color = "aliceblue";
          //add.style.backgroundColor = "rgb(33, 30, 30)";
          //add.style.color = "aliceblue";
          let last_theme = "ðŸ”†";
          localStorage.setItem("last_theme", last_theme);
        } else if (theme.textContent === "ðŸŒ™") {
          theme.textContent = "ðŸ”†";
          document.body.style.color = "aliceblue";
          document.body.style.backgroundColor = "rgb(33, 30, 30)";
          input.style.backgroundColor = "";
          input.style.color = "";
          add.style.backgroundColor = "";
          add.style.color = "";
          let last_theme = "ðŸŒ™";
          localStorage.setItem("last_theme", last_theme);
        }
      });
      let btn_work = document.getElementById("btn_work");
      btn_work.addEventListener("mousedown", () => {
        btn_work.style.bottom = "17px";
      });
      document.addEventListener("mouseup", () => {
        btn_work.style.bottom = "20px";
      });
      btn_work.addEventListener("click", () => {
        window.location.href = "work.html";
      });
    </script>
  </body>
</html>
